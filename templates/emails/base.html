{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}

<!doctype html>
<html lang="{{ LANGUAGE_CODE }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>{{ subject }}</title>

    {% if view %}
      {% include 'includes/favicon.html' %}
    {% endif %}

    <style>
      /* Basic reset */
      body, table, td, a { -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; }
      table, td { mso-table-lspace:0pt; mso-table-rspace:0pt; }
      img { -ms-interpolation-mode:bicubic; }
      img { border:0; height:auto; line-height:100%; outline:none; text-decoration:none; }
      table { border-collapse:collapse !important; }

      /* Container */
      .email-body { width:100% !important; margin:0; padding:0; background-color:#f4f4f6; }
      .email-container { max-width:600px; margin:0 auto; }

      /* Typography */
      .sans { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif; }
      .h1 { font-size:24px; font-weight:700; margin:0 0 8px; }
      .p { font-size:15px; line-height:22px; margin:0 0 12px; }

      /* Button */
      .btn { display:inline-block; padding:10px 18px; border-radius:6px; text-decoration:none; font-weight:600; }

      /* Responsive */
      @media screen and (max-width:600px) {
        .email-container { width:100% !important; }
        .h1 { font-size:20px !important; }
      }

      /* Preheader hide */
      .preheader { display:none !important; visibility:hidden; opacity:0; color:transparent; height:0; width:0; }

    </style>
  </head>
  <body class="email-body sans" style="margin:0;padding:0;background-color:#f4f4f6;">

    <!-- Preheader: small summary shown in inbox preview -->
    <span class="preheader">{{ preheader|default:"" }}</span>

    <table role="presentation" border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr>
        <td align="center">

          <!-- Main container -->
          <table role="presentation" border="0" cellpadding="0" cellspacing="0" class="email-container" width="600" style="margin:24px auto;">

            <!-- Header -->
            <tr>
              <td style="background-color: {{ theme_color|default:'#002180' }}; padding:20px 24px; border-top-left-radius:8px; border-top-right-radius:8px; text-align:center;">
                <!-- Logo centered -->
                <div style="display:inline-block; vertical-align:middle;">
                  {% if logo %}
                    <img src="{{ logo }}" style="max-width: 250px;">
                  {% else %}
                    <div class="h1" style="color:#ffffff;">{{ system_title }}</div>
                  {% endif %}
                </div>
              </td>
            </tr>

            <!-- Body card -->
            <tr>
              <td style="background-color:#ffffff; padding:28px 28px; border-bottom-left-radius:8px; border-bottom-right-radius:8px;">

                <!-- Title (optional) -->
                {% if title %}
                  <div style="text-align:left; margin-bottom:8px;">
                    <div class="h1" style="color:#111111;">{{ title }}</div>
                  </div>
                {% endif %}

                <!-- Content block -->
                {% if content %}
                  {{ content|safe }}
                {% else %}
                  {% block content %}
                    <p class="p" style="color:#333333;"></p>
                  {% endblock %}
                {% endif %}

                <!-- CTA -->
                {% if cta %}
                <div style="margin-top:18px;">
                  <a href="{{ cta.url }}" class="btn" style="background-color: {{ cta.color|default:theme_color|default:'#002180' }}; color:{{ cta.text_color|default:'#ffffff' }};">
                    {{ cta.text }}
                  </a>
                </div>
                {% endif %}
              </td>
            </tr>

            <!-- Footer -->
            <tr>
              <td style="padding:16px 20px; text-align:center; font-size:12px; color:#666666;">
                <div style="margin-bottom:6px;">
                  {% if footer_text %}
                    {{ footer_text }}
                  {% else %}
                    <div>© {{ now|date:"Y" }} {{ system_title }} — {% trans 'All rights reserved' %}</div>
                    {% if system_company_address %}
                      <div>{{ system_company_address }}</div>
                    {% endif %}
                  {% endif %}
                </div>
                {% if unsubscribe_url %}
                  <div style="font-size:11px; color:#999999;">
                    {% blocktrans with unsubscribe_url=unsubscribe_url theme_color=theme_color %}
                      If you no longer want to receive these emails, <a href="{{ unsubscribe_url }}" style="color:{{ theme_color|default:'#002180' }}; text-decoration:none;">click here to unsubscribe</a>.
                    {% endblocktrans %}
                  </div>
                {% endif %}
              </td>
            </tr>

          </table>

        </td>
      </tr>
    </table>

  </body>
</html>
